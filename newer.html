<!DOCTYPE html>
<html>

<head>

</head>




<body>


  <center>
    <br><br>
    <input onclick="drop();" type=button value="Show All">
    <br><br>
    <div id="map" style="width:1000px;height:460px;"></div>
  </center>



  <script>
    var map;
    var all = [
      { "name": '0', "lat": 24.92650881416285, "lng": 67.10869789123535, "status": 'Deactivated' },
      { "name": '1', "lat": 24.845937391711946, "lng": 66.73162758350372, "status": 'Stationary' },
      { "name": '2', "lat": 24.89372598975854, "lng": 67.08657503128052, "status": 'Deactivated' },
      { "name": '3', "lat": 24.803024353889768, "lng": 67.02959954738617, "status": 'Moving' },
      { "name": '4', "lat": 25.032825073841558, "lng": 66.8778133392334, "status": 'Moving' },
      { "name": '5', "lat": 24.91757686884615, "lng": 67.19997346401215, "status": 'Stationary' }
    ];
    var markers = [];

    function initialize() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(24.89372598975854, 67.08657503128052),
        zoom: 11,
        mapTypeId: google.maps.MapTypeId.TERRAIN
      });
    }

    function drop() {
      //end.setVisible(false);
      map.setZoom(10);
      clearMarkers();
      for (var j = 0; j < all.length; j++) {
        addMarker(all[j], j * 200);
      }
      //	stop();
    }

    function clearMarkers() {
      for (var j = 0; j < markers.length; j++) {
        markers[j].setMap(null);
      }
      markers = [];
    }

    function addMarker(position, timeout) {
      var icon = "";
      var data = position;
      switch (data.status) {
        case "Stationary":
          icon = "red";
          break;
        case "Moving":
          icon = "green";
          break;
        case "Deactivated":
          icon = "yellow";
          break;
      }
      icon = "http://maps.google.com/mapfiles/ms/micons/" + icon + ".png";
      window.setTimeout(function() {
        markers.push(new google.maps.Marker({
          position: position,
          map: map,
          title: data.name,
          animation: google.maps.Animation.DROP,
          icon: new google.maps.MarkerImage(icon)
        }));
      }, timeout);
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    
  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxfXHGgV8V65RJ4LN1N8P8nG8YbXRhI5E&callback=initMap">
  </script>



</body>

</html>
